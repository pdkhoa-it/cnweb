@model NoiThat_v2._0.Models.TaiKhoan

@{
    ViewBag.Title = "Index";
    Layout = null;
}

<!-- Sign in / Register Modal -->
<div class="modal fade" id="signin-modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"><i class="icon-close"></i></span>
                </button>
                <div class="form-box">
                    <div class="form-tab">
                        <ul class="nav nav-pills nav-fill" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="signin-tab" data-toggle="tab" href="#signin" role="tab" aria-controls="signin" aria-selected="true">Sign In</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="register-tab" data-toggle="tab" href="#register" role="tab" aria-controls="register" aria-selected="false">Register</a>
                            </li>
                        </ul>
                        <div class="tab-content" id="tab-content-5">
                            <div class="tab-pane fade show active" id="signin" role="tabpanel" aria-labelledby="signin-tab">
                                @using (Ajax.BeginForm("Login", "Login", new AjaxOptions { HttpMethod = "POST", OnSuccess = "Success_Login" }))
                                {
                                    <label class="text-danger col-form-label" id="Login_Mess"></label>

                                    <div class="form-group">
                                        <label for="singin-email">Email</label>
                                        @Html.Editor("Email", new { htmlAttributes = new { @class = "form-control", @type = "email" } })
                                        @Html.ValidationMessage("Email", "", new { @class = "text-danger" })
                                    </div><!-- End .form-group -->

                                    <div class="form-group">
                                        <label for="singin-password">Mật khẩu</label>
                                        @Html.Editor("MatKhau", new { htmlAttributes = new { @class = "form-control", @type = "password" } })
                                        @Html.ValidationMessage("MatKhau", "", new { @class = "text-danger" })
                                    </div><!-- End .form-group -->

                                    <div class="form-footer">
                                        <button type="submit" class="btn btn-outline-primary-2">
                                            <span>LOG IN</span>
                                            <i class="icon-long-arrow-right"></i>
                                        </button>

                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input" id="signin-remember">
                                            <label class="custom-control-label" for="signin-remember">Remember Me</label>
                                        </div><!-- End .custom-checkbox -->

                                        <a href="#" class="forgot-link">Forgot Your Password?</a>
                                    </div><!-- End .form-footer -->
                                }
                            </div><!-- .End .tab-pane -->
                            <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
                                @using (Ajax.BeginForm("Sign_up", "Login", new AjaxOptions { HttpMethod = "POST", OnSuccess = "Success_Sign_up" }))
                                {
                                    <label class="text-danger col-form-label" id="Sign_upMess"></label>

                                    @Html.Hidden("ID", "0")
                                    <div class="form-group">
                                        @Html.Editor("HoTen", new { htmlAttributes = new { @class = "form-control", @placeholder = "Họ và tên" } })
                                        @Html.ValidationMessage("HoTen", "", new { @class = "text-danger" })
                                    </div>
                                    <div class="form-group">
                                        @Html.Editor("Email", new { htmlAttributes = new { @class = "form-control", @type = "email", @placeholder = "Email" } })
                                        @Html.ValidationMessage("Email", "", new { @class = "text-danger" })
                                    </div>
                                    <div class="form-group">
                                        @Html.Editor("MatKhau", new { htmlAttributes = new { @class = "form-control", @type = "password", @placeholder = "Mật khẩu" } })
                                        @Html.ValidationMessage("MatKhau", "", new { @class = "text-danger" })
                                    </div>
                                    <div class="form-group">
                                        @Html.Editor("XacNhanMatKhau", new { htmlAttributes = new { @class = "form-control", @type = "password", @placeholder = "Xác nhận mật khẩu" } })
                                        @Html.ValidationMessage("XacNhanMatKhau", "", new { @class = "text-danger" })
                                    </div>
                                    <div class="form-group">
                                        <select name="GioiTinh" id="GioiTinh" class="form-control">
                                            <option value="Nam">Nam</option>
                                            <option value="Nữ">Nữ</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        @Html.Editor("Sdt", new { htmlAttributes = new { @class = "form-control", @type = "number", @placeholder = "Số điện thoại" } })
                                        @Html.ValidationMessage("Sdt", "", new { @class = "text-danger" })
                                    </div>
                                    <div class="form-group">
                                        @Html.Editor("NgaySinh", new { htmlAttributes = new { @class = "form-control", @placeholder = "Ngày sinh" } })
                                        @Html.ValidationMessage("NgaySinh", "", new { @class = "text-danger" })
                                    </div>
                                    <div class="form-group">
                                        @Html.Editor("DiaChi", new { htmlAttributes = new { @class = "form-control", @placeholder = "Địa chỉ" } })
                                        @Html.ValidationMessage("DiaChi", "", new { @class = "text-danger" })
                                    </div>
                                    <div class="form-group">
                                        <input type="submit" class="btn btn-success float-right ml-3" id="btnSubmit" value="Submit" />
                                        <input type="reset" class="btn btn-secondary float-right" value="Reset" />
                                    </div>
                                }
                            </div><!-- .End .tab-pane -->
                        </div><!-- End .tab-content -->
                    </div><!-- End .form-tab -->
                </div><!-- End .form-box -->
            </div><!-- End .modal-body -->
        </div><!-- End .modal-content -->
    </div><!-- End .modal-dialog -->
</div><!-- End .modal -->

<script>

    function Success_Sign_up(dt) {
        if (dt.success) {
            location.reload();
        }
        else {
            $('#Sign_upMess').html(dt.message);
        }
    }

    function Success_Login(dt) {
        if (dt.admin) {
            window.location.href = "/Admin/Home/Index";
        }
        if (dt.user) {
            location.reload();
        }

        if (!dt.success) {
            $('#Login_Mess').html(dt.message);
        }
    }

    function Logout() {
        $.post("/Login/Logout").done(
            location.reload()
        );
    }

</script>
