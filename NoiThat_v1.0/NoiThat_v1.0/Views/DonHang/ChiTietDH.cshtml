@model NoiThat_v1._0.Models.ChiTietDonHang

@{
    Layout = null;
}

<!--Nút mở Modal-->
<a class="btn btn-success m-3" data-toggle="modal" data-target="#ChiTietDHModal">Thêm chi tiết đơn hàng</a>
<a class="btn btn-warning" data-toggle="modal" data-target="#ImportCTDHModal">Import Excel</a>


<!-- Modal -->
<div class="modal fade" id="ChiTietDHModal" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ModalLabelCTDH">Thêm chi tiết đơn hàng</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="Refresh()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                @using (Ajax.BeginForm("AddOrEditCTDH", "DonHang", new AjaxOptions { HttpMethod = "POST", OnSuccess = "Success" }))
                {
                    @Html.Hidden("IDCT", "0")
                    @Html.Hidden("IDDonHang")
                    <div class="form-group">
                        @Html.DropDownList("IDSanPham", ViewBag.listSP as SelectList, "Chọn sản phẩm", new { @class = "form-control" })
                        @Html.ValidationMessage("IDSanPham", "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group">
                        @Html.Editor("SoLuong", new { htmlAttributes = new { @class = "form-control", @type = "number", @placeholder = "Số lượng" } })
                        @Html.ValidationMessage("SoLuong", "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group">
                        @Html.Editor("DonGia", new { htmlAttributes = new { @class = "form-control", @type = "number", @placeholder = "Đơn giá" } })
                        @Html.ValidationMessage("DonGia", "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group">
                        <input type="submit" class="btn btn-success float-right ml-3" id="btnSubmit" value="Submit" />
                        <input type="reset" class="btn btn-secondary float-right" value="Reset" />
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<table id="tableCTDH" class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Sản phẩm</th>
            <th>Danh mục</th>
            <th>Nhóm</th>
            <th>Nhà cung cấp</th>
            <th>Số lượng</th>
            <th>Đơn giá</th>
            <th>Thành tiền</th>
            <th width="15%"></th>
        </tr>
    </thead>
</table>

<!-- Modal import file Excel -->
<div class="modal fade" id="ImportCTDHModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Nhập từ file Excel</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                @using (Ajax.BeginForm("ImportCTDH", "SanPham", new AjaxOptions { HttpMethod = "POST", OnSuccess = "ImportSuccess" }, new { enctype = "multipart/form-data" }))
                {
                    <input type="text" name="IDDonHangImport" id="IDDonHangImport" hidden/>
                    <input type="file" class="form-control-file" accept="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" name="excelfile" id="excelfile" />
                    <input type="submit" class="btn btn-success float-right ml-3" value="Nhập" />
                    <input type="button" data-dismiss="modal" class="btn btn-secondary float-right" value="Hủy" />
                }
            </div>
        </div>
    </div>
</div>
